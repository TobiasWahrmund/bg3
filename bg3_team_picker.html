<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Baldur's Gate 3 ‚Äì Team Picker</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: auto;
      background-color: #1e1e1e;
      color: #f0f0f0;
    }
    h1 { text-align: center; }
    select { width: 100%; padding: 5px; margin-bottom: 8px; }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    .duplicate { background-color: #ffd6d6; }
    .player-card {
      border: 1px solid #ddd;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 5px;
    }
    button { margin-top: 10px; }
    img.icon {
      width: 100px;
      height: 100px;
      object-fit: contain;
    }
    .icon-wrapper {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<h1>Baldur's Gate 3 ‚Äì Team Picker</h1>
<p>W√§hlt eure Rasse, Subrasse, Klasse und Subklasse. Speichert automatisch im Browser!</p>

<div id="players"></div>
<button onclick="resetData()">üóëÔ∏è Zur√ºcksetzen</button>

<table>
  <thead>
    <tr>
      <th>Spieler</th>
      <th>Rasse</th>
      <th>Subrasse</th>
      <th>Klasse</th>
      <th>Subklasse</th>
    </tr>
  </thead>
  <tbody id="summary"></tbody>
</table>

<script>
document.addEventListener("DOMContentLoaded", function (event) {
const playerNames = ["Georg", "Sebastian", "Johannes", "Tobi"];

const races = {
  "Human": ["Default"],
  "Elf": ["High Elf", "Wood Elf"],
  "Drow": ["Seldarine Drow", "Lolth-Sworn Drow"],
  "Half-Elf": ["High Half-Elf", "Wood Half-Elf", "Drow Half-Elf"],
  "Half-Orc": ["Default"],
  "Halfling": ["Lightfoot halfling", "Strongheart halfling"],
  "Dwarf": ["Gold Dwarf", "Shield Dwarf", "Duergar"],
  "Gnome": ["Rock Gnome", "Forest Gnome", "Deep Gnomes"],
  "Tiefling": ["Asmodeus tiefling", "Mephistopheles tiefling", "Zariel tiefling"],
  "Githyanki": ["Default"],
  "Dragonborn": ["Black", "Blue", "Brass", "Bronze", "Copper", "Gold", "Green", "Red", "Silver", "White"]
};

const raceIcons = {
  "Human": "images/human.png",
  "Elf": "images/elf.png",
  "Drow": "images/drow.png",
  "Half-Elf": "images/half-elf.png",
  "Half-Orc": "images/half-orc.png",
  "Halfling": "images/halfling.png",
  "Dwarf": "images/dwarf.png",
  "Gnome": "images/gnome.png",
  "Tiefling": "images/tiefling.png",
  "Githyanki": "images/githyanki.png",
  "Dragonborn": "images/dragonborn.png"
};

const subraceIcons = {
  "Default": "images/default.png",
  "High Elf": "images/highelf.png",
  "Wood Elf": "images/woodelf.png",
  "Seldarine Drow": "images/seldarinedrow.png",
  "Lolth-Sworn Drow": "images/lolthsworndrow.png",
  "High Half-Elf": "images/highhalfelf.png",
  "Wood Half-Elf": "images/woodhalfelf.png",
  "Drow Half-Elf": "images/drowhalfelf.png",
  "Lightfoot halfling": "images/lightfoot.png",
  "Strongheart halfling": "images/strongheart.png",
  "Gold Dwarf": "images/golddwarf.png",
  "Shield Dwarf": "images/shielddwarf.png",
  "Duergar": "images/duergar.png",
  "Forest Gnome": "images/forestgnome.png",
  "Rock Gnome": "images/rockgnome.png",
  "Deep Gnomes": "images/deepgnomes.png",
  "Asmodeus tiefling": "images/asmodeus.png",
  "Mephistopheles tiefling": "images/mephistopheles.png",
  "Zariel tiefling": "images/zariel.png",
  "Black": "images/black.png",
  "Blue": "images/blue.png",
  "Brass": "images/brass.png",
  "Bronze": "images/bronze.png",
  "Copper": "images/copper.png",
  "Gold": "images/gold.png",
  "Green": "images/green.png",
  "Red": "images/red.png",
  "Silver": "images/silver.png",
  "White": "images/white.png"
};

const classes = {
  "Barbarian": ["Berserker", "Wild Magic", "Wildheart", "Giant", "No Plan"],
  "Bard": ["College of Lore", "College of Valour", "College of Swords", "College of Glamour", "No Plan"],
  "Cleric": ["Life Domain", "Light Domain", "Trickery Domain", "Knowledge Domain", "Nature Domain", "Tempest Domain", "War Domain", "Death Domain", "No Plan"],
  "Druid": ["Circle of the Land", "Circle of the Moon", "Circle of the Spores", "Circle of the Stars", "No Plan"],
  "Fighter": ["Battle Master", "Eldrith Knight", "Champion", "Arcane Archer", "No Plan"],
  "Monk": ["Way of the Four Elements", "Way of the Open Hand", "Way of Shadow", "Way of the Drunken Master", "No Plan"],
  "Paladin": ["Oath of the Ancients", "Oath of Devotion", "Oath of Vengeance", "Oath of the Crown", "Oathbreaker", "No Plan"],
  "Ranger": ["Hunter", "Beast Master", "Gloom Stalker", "Swarmkeeper", "No Plan"],
  "Rogue": ["Thief", "Arcane Trickster", "Assassin", "Swashbuckler", "No Plan"],
  "Sorcerer": ["Wild Magic", "Draconic Bloodline", "Storm Sorcery", "Shadow Magic", "No Plan"],
  "Warlock": ["The Fiend", "The Great Old One", "The Archfey", "The Hexblade", "No Plan"],
  "Wizard": ["Abjuration School", "Evocation School", "Necromancy School", "Conjuration School", "Enchantment School", "Divination School", "Illusion School", "Transmutation School", "Bladesinging", "No Plan"]
};

const classIcons = {
  "Barbarian": "images/barbarian.png",
  "Bard": "images/bard.png",
  "Cleric": "images/cleric.png",
  "Druid": "images/druid.png",
  "Fighter": "images/fighter.png",
  "Monk": "images/monk.png",
  "Paladin": "images/paladin.png",
  "Ranger": "images/ranger.png",
  "Rogue": "images/rogue.png",
  "Sorcerer": "images/sorcerer.png",
  "Warlock": "images/warlock.png",
  "Wizard": "images/wizard.png"
};

const subclassIcons = {
  "No Plan": "images/np.png",
  "Berserker": "images/berserker.png",
  "Wild Magic": "images/wildmagic.png",
  "Wildheart": "images/wildheart.png",
  "Giant": "images/giant.png",
  "College of Lore": "images/collegeoflore.png",
  "College of Valour": "images/collegeofvalour.png",
  "College of Swords": "images/collegeofswords.png",
  "College of Glamour": "images/collegeofglamour.png",
  "Life Domain": "images/lifedomain.png",
  "Light Domain": "images/lightdomain.png",
  "Trickery Domain": "images/trickerydomain.png",
  "Knowledge Domain": "images/knowledgedomain.png",
  "Nature Domain": "images/naturedomain.png",
  "Tempest Domain": "images/tempestdomain.png",
  "War Domain": "images/wardomain.png",
  "Death Domain": "images/deathdomain.png",
  "Circle of the Land": "images/circleoftheland.png",
  "Circle of the Moon": "images/circleofthemoon.png",
  "Circle of the Spores": "images/circleofthespores.png",
  "Circle of the Stars": "images/circleofthestars.png",
  "Battle Master": "images/battlemaster.png",
  "Eldrith Knight": "images/eldrithknight.png",
  "Champion": "images/champion.png",
  "Arcane Archer": "images/arcanearcher.png",
  "Way of the Four Elements": "images/wayofthefourelements.png",
  "Way of the Open Hand": "images/wayoftheopenhand.png",
  "Way of Shadow": "images/wayofshadow.png",
  "Way of the Drunken Master": "images/wayofthedrunkenmaster.png",
  "Oath of the Ancients": "images/oathoftheancients.png",
  "Oath of Devotion": "images/oathofdevotion.png",
  "Oath of Vengeance": "images/oathofvengeance.png",
  "Oath of the Crown": "images/oathofthecrown.png",
  "Oathbreaker": "images/oathbreaker.png",
  "Hunter": "images/hunter.png",
  "Beast Master": "images/beastmaster.png",
  "Gloom Stalker": "images/gloomstalker.png",
  "Swarmkeeper": "images/swarmkeeper.png",
  "Thief": "images/thief.png",
  "Arcane Trickster": "images/arcanetrickster.png",
  "Assassin": "images/assassin.png",
  "Swashbuckler": "images/swashbuckler.png",
  "Draconic Bloodline": "images/draconicbloodline.png",
  "Storm Sorcery": "images/stormsorcery.png",
  "Shadow Magic": "images/shadowmagic.png",
  "The Fiend": "images/thefiend.png",
  "The Great Old One": "images/thegreatoldone.png",
  "The Archfey": "images/thearchfey.png",
  "The Hexblade": "images/thehexblade.png",
  "Abjuration School": "images/abjurationschool.png",
  "Evocation School": "images/evocationschool.png",
  "Necromancy School": "images/necromancyschool.png",
  "Conjuration School": "images/conjurationschool.png",
  "Enchantment School": "images/enchantmentschool.png",
  "Divination School": "images/divinationschool.png",
  "Illusion School": "images/illusionschool.png",
  "Transmutation School": "images/transmutationschool.png",
  "Bladesinging": "images/bladesinging.png"
};

function createSelect(options, id, selectedValue, onChange) {
  const select = document.createElement("select");
  select.id = id;
  select.onchange = onChange;
  options.forEach(option => {
    const opt = document.createElement("option");
    opt.value = option;
    opt.textContent = option;
    if (option === selectedValue) opt.selected = true;
    select.appendChild(opt);
  });
  return select;
}

function updateSummary() {
  const tbody = document.getElementById("summary");
  tbody.innerHTML = "";
  const allChoices = [];

  playerNames.forEach((name, i) => {
    const race = document.getElementById(`race-${i}`).value;
    const subrace = document.getElementById(`subrace-${i}`).value;
    const cls = document.getElementById(`class-${i}`).value;
    const sub = document.getElementById(`subclass-${i}`).value;

    allChoices.push({ race, subrace, cls, sub });

    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${name}</td>
      <td>${race}</td>
      <td>${subrace}</td>
      <td>${cls}</td>
      <td>${sub}</td>
    `;
    tbody.appendChild(row);
  });

  localStorage.setItem("bg3_team", JSON.stringify(allChoices.map((c, i) => ({
    player: playerNames[i],
    race: c.race,
    subrace: c.subrace,
    class: c.cls,
    subclass: c.sub
  }))));
}

function renderForm() {
  const saved = JSON.parse(localStorage.getItem("bg3_team") || "[]");
  const container = document.getElementById("players");
  container.innerHTML = "";

  playerNames.forEach((name, i) => {
    const savedData = saved[i] || {};
    const race = savedData.race || Object.keys(races)[0];
    const subrace = savedData.subrace || races[race][0];
    const cls = savedData.class || Object.keys(classes)[0];
    const sub = savedData.subclass || classes[cls][0];

    const div = document.createElement("div");
    div.className = "player-card";

    const raceImg = Object.assign(document.createElement("img"), {
      src: raceIcons[race], alt: race, className: "icon", id: `race-icon-${i}`
    });
    const subraceImg = Object.assign(document.createElement("img"), {
      src: subraceIcons[subrace], alt: subrace, className: "icon", id: `subrace-icon-${i}`
    });
    const classImg = Object.assign(document.createElement("img"), {
      src: classIcons[cls], alt: cls, className: "icon", id: `class-icon-${i}`
    });
    const subclassImg = Object.assign(document.createElement("img"), {
      src: subclassIcons[sub], alt: sub, className: "icon", id: `subclass-icon-${i}`
    });

    const raceSelect = createSelect(Object.keys(races), `race-${i}`, race, () => {
      const raceVal = document.getElementById(`race-${i}`).value;
      const subraceSelect = document.getElementById(`subrace-${i}`);
      subraceSelect.innerHTML = "";
      races[raceVal].forEach(sr => {
        const opt = document.createElement("option");
        opt.value = sr;
        opt.textContent = sr;
        subraceSelect.appendChild(opt);
      });
	  document.getElementById(`race-icon-${i}`).src = raceIcons[raceVal];
      subraceSelect.dispatchEvent(new Event("change"));
      updateSummary();
    });

    const subraceSelect = createSelect(races[race], `subrace-${i}`, subrace, () => {
      const val = document.getElementById(`subrace-${i}`).value;
      document.getElementById(`subrace-icon-${i}`).src = subraceIcons[val];
      updateSummary();
    });

    const classSelect = createSelect(Object.keys(classes), `class-${i}`, cls, () => {
      const clsVal = document.getElementById(`class-${i}`).value;
      const subclassSelect = document.getElementById(`subclass-${i}`);
      subclassSelect.innerHTML = "";
      classes[clsVal].forEach(sub => {
        const opt = document.createElement("option");
        opt.value = sub;
        opt.textContent = sub;
        subclassSelect.appendChild(opt);
      });
	  document.getElementById(`class-icon-${i}`).src = classIcons[clsVal];
      subclassSelect.dispatchEvent(new Event("change"));
      updateSummary();
    });

    const subclassSelect = createSelect(classes[cls], `subclass-${i}`, sub, () => {
      const val = document.getElementById(`subclass-${i}`).value;
      document.getElementById(`subclass-icon-${i}`).src = subclassIcons[val];
      updateSummary();
    });

    const iconWrapper = document.createElement("div");
    iconWrapper.className = "icon-wrapper";
    iconWrapper.append(raceImg, subraceImg, classImg, subclassImg);

    div.innerHTML = `<strong>${name}</strong><br><br>`;
    div.appendChild(iconWrapper);
    div.append("Rasse: ", raceSelect, document.createElement("br"));
    div.append("Subrasse: ", subraceSelect, document.createElement("br"));
    div.append("Klasse: ", classSelect, document.createElement("br"));
    div.append("Subklasse: ", subclassSelect);

    container.appendChild(div);
  });

  updateSummary();
}

function resetData() {
  if (confirm("Willst du wirklich alle Daten l\u00f6schen?")) {
    localStorage.removeItem("bg3_team");
    renderForm();
  }
}

renderForm();
});
</script>

</body>
</html>
